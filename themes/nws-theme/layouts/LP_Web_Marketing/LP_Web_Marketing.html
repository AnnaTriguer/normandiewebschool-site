{{- partial "head.html" . -}}

<section class="overflow-hidden" id="filiere-doc">
  <div class="container d-block position-relative text-center">
  <!-- hero area -->
  {{ with .Params.banner }}
  <section class="hero-arealp overflow-hidden d-flex align-items-center" id="parallax" style="background-image: url('{{ .image | absURL }}')"></section>
  {{end}}      
  </div>
</section>

{{ if .Params.reasons.enable }}
{{ with .Params.reasons }}
<!-- reasons -->
  <section class="section clip-top-white" id="reasons">
    <div class="container">
        <div class="card center-card" style="box-shadow: 0 0 0px #00000029;">
            <div class="row">
              <div class="col-md" style="text-align: center;">Nos mots clés</div>
              <div class="col-md" video">
              <video style="box-shadow: -4px 5px 9px 0px #ffffff;" controls preload="auto" controlslist="nodownload" height="230" width="320" box-shadow="10px 5px 5px #ffffff" id="_NWSWebMarketing" poster="/uploads/interview_romain.png">
              <source src="/uploads/WEBMARKETING.mp4" type="video/mp4" /></div>
            </div>
      <div class="card center-card d-lg-flex">
        <div class="row d-flex justify-content-center">
        {{ range .item }}
          <div class="mt-4 mt-lg-0 w-lg-20 px-2">
          <img src="{{ .logo }}" alt="{{.alt}}" class="mt-4">
          <p class="mt-4 mr-md-5 ml-md-5 mr-lg-1 ml-lg-1 mt-lg-3" style="color:#00a5a5;font-weight: 700;">{{.content}}</p>
          </div>
        {{ end }}
        </div>
      </div>
    </div>
    </div>
  </section>
<!-- /reasons -->
{{ end }}
{{ end }}

{{ if .Params.about.enable }}
{{ with .Params.about }}
  <p class="col-md-12 font-weight-medium text-center px-3 my-3" style="font-family: Fugaz One;font-size: x-large;" >            
  {{ .description | safeHTML }}
  </p>
{{ end }}
{{ end }}

<section class="pb-4">
  <div class="container">
    {{ with .Params.form }}
      <div class="card-body" style="margin-left: 20px;margin-right: 20px;">
      <form id="ajaxForm" name='inscription' action="https://normandiewebschool.fr:8080/applicants" method="POST" class="mt-3" >
        <div class="form-group">
          <div class="input-icon mb-3 position-relative w-lg-50 pr-lg-1 d-lg-inline-block">
          <img src="/uploads/icn-user.png" alt="" class="icn-contact"><input type="text" class="form-control" id="Prenom" name="firstname" placeholder="Votre prénom (requis)" required="true" minlength="1" maxlength="20"></div>
          <div class="input-icon mb-3 position-relative w-lg-50 pl-lg-1 d-lg-inline-block">
          <img src="/uploads/icn-user.png" alt="" class="icn-contact"><input type="text" class="form-control" id="Nom" name="name" placeholder="Votre nom (requis)" required="true" minlength="2" maxlength="30"></div>
          <div class="input-icon mb-3 position-relative w-lg-50 pr-lg-1 d-lg-inline-block">
          <img src="/uploads/icn-mail.png" alt="icn-contact" class="icn-contact"><input type="email" class="form-control" id="Mail" name="email" placeholder="Votre adresse email (requis)" required="true"></div>
          <div class="input-icon mb-3 position-relative w-lg-50 pl-lg-1 d-lg-inline-block">
          <img src="/uploads/icn-phone.png" alt="icn-contact" class="icn-contact"><input type="tel" class="form-control" id="Phone" name="phone" placeholder="Votre numéro de téléphone (requis)" required="true" minlength="8" maxlength="15"></div>
            <div class="mb-lg-4">
              <div class="col-lg-8">
              {{range $index, $el := .checkbox}}
                <div class="form-check pb-3">
                <input
                type="checkbox"
                class="form-check-input"
                id="checkbox-{{$index}}"
                name="{{.name}}"
                {{ if .required | eq true }} required="true" {{ end }}
                />
                <label class="form-check-label" for="checkbox-{{$index}}"
                >{{.content}}</label
                >
                </div>
              {{end}}
              </div>
                <div class="col-lg-4 d-flex justify-content-center my-5 my-lg-0">
                <input type="hidden" id="captchaResponse" name="g-recaptcha-response">
                </div>
             </div>
                <div class="row">
                  <div class="col-12 d-flex justify-content-center">
                    <div id="decoded"></div>
                    <button type="submit" id="encode" class="btn font-weight-medium color-blue py-3 px-5">
                    <a>Postuler</a>
                    </button>
                    <div id="encoded"></div>
                  </div>
                </div>
              </div>
       </form>
       </div>
   </div>
   {{end}}
  </div>
</section>

{{ if .Params.about.enable }}
{{ with .Params.about }}
<section class="pb-4 position-relative overflow-hidden" id="filiere-doc">
  <div class="container d-block position-relative text-center">
    <div class="container">
      <p class="col-md-12 font-weight-medium text-center px-3 my-3" style="font-family: Fugaz One;font-size: x-large;" >            
      {{ .description2 | safeHTML }}
    </div>
  </div>
</section>
{{ end }}
{{ end }}

{{ if .Params.profession.enable }}
{{ with .Params.profession }}
<section class="clip-bottom-lightgrey" id="profession">
    <div class="container">
       <div class="card center-card" style="box-shadow: 0 0 0px #00000029;">
          <div class="card center-card d-lg-flex">
             <div class="row  d-flex justify-content-center">
              {{ range .item }}
                 <div class="col-12 col-lg-4 flex-column align-items-center profession mt-5 px-lg-5">
                 <h3 class="text-center mb-3 color-blue">{{.title}}</h3>
                 <p class="text-center m-auto">{{.description}}</p>
                 </div>
              {{ end }}
           </div>
        </div>
      </div>
      </div>
    </div>
</section>
{{ end }}
{{ end }}


<script>
  grecaptcha.ready(function() {
    grecaptcha.execute('6Ld62j8aAAAAAN6zC4CY4GOyV2D_LU1x4CzuHsNs', {action: 'homepage'})
            .then(function(token) {
              document.getElementById('captchaResponse').value = token;
            });
  });
</script>

<script>
    encode.onclick = async (e) => {
        let response = await fetch('https://normandiewebschool.fr:8080/applicants', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                },
        })

        let text = await response.text(); // read response body as text
        data = JSON.parse(text);
        document.querySelector("#encoded").innerHTML = text;
      //  document.querySelector("#encoded").innerHTML = `First name = ${data.firstname} <br/> 
      //                                                  Last name = ${data.lastname} <br/>
      //                                                  Age    = ${data.age}`
    };

    ajaxForm.onsubmit = async (e) => {
      e.preventDefault();
      var form = document.querySelector("#ajaxForm");
     // var form = document.forms[0];

        data = {
          firstname : form.querySelector('input[name="firstname"]').value,
          lastname : form.querySelector('input[name="name"]').value,
          email : form.querySelector('input[name="email"]').value,
          phone : form.querySelector('input[name="phone"]').value,
        }

        let response = await fetch('https://normandiewebschool.fr:8080/applicants', {
                method: 'POST', // or 'PUT'
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
        })

        let text = await response.text(); // read response body as text
        document.querySelector("#decoded").innerHTML = text;
    };
</script>   
